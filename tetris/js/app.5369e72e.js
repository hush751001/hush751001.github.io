(function(e){function t(t){for(var n,i,a=t[0],s=t[1],l=t[2],f=0,h=[];f<a.length;f++)i=a[f],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&h.push(c[i][0]),c[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,a=1;a<r.length;a++){var s=r[a];0!==c[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},c={app:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/tetris/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"0e88":function(e,t,r){"use strict";var n=r("72f7"),c=r.n(n);c.a},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),c=r.n(n);c.a},"72f7":function(e,t,r){},"8d50":function(e,t,r){},"9c0c":function(e,t,r){},a0f4:function(e,t,r){},bec1:function(e,t,r){"use strict";var n=r("a0f4"),c=r.n(n);c.a},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],i=(r("5c0b"),r("2877")),a={},s=Object(i["a"])(a,c,o,!1,null,null,null),l=s.exports,u=r("9483");Object(u["a"])("".concat("/tetris/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var f=r("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tetris"},[r("div",[e._v("점수 : "+e._s(e.score))]),r("div",{staticClass:"tetris-stage"},[r("board",{attrs:{blocks:e.bgBlockString}}),r("my-block",{attrs:{blocks:e.myBlockString,x:e.curBlockX,y:e.curBlockY}})],1)])},k=[],p=(r("cb29"),r("4160"),r("45fc"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),d=r("d4ec"),b=r("bee2"),y=r("262e"),v=r("2caf"),g=r("9ab4"),B=r("60a3"),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"board"},e._l(e.getBlocks,(function(t,n){return r("div",{key:n,staticClass:"horz"},e._l(t,(function(e,t){return r("div",{key:t,staticClass:"block",class:"color-"+e})})),0)})),0)},m=[],O=function(e){Object(y["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(d["a"])(this,r),t.apply(this,arguments)}return Object(b["a"])(r,[{key:"getBlocks",get:function(){var e=[];try{e=JSON.parse(this.blocks)}catch(t){console.log(t)}return e}}]),r}(B["c"]);Object(g["a"])([Object(B["b"])()],O.prototype,"blocks",void 0),O=Object(g["a"])([B["a"]],O);var j=O,S=j,x=(r("fdc1"),Object(i["a"])(S,w,m,!1,null,"649b8c12",null)),C=x.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-block",style:e.getStyle},e._l(e.getBlocks,(function(t,n){return r("div",{key:n,staticClass:"horz"},e._l(t,(function(e,t){return r("div",{key:t,staticClass:"block",class:"color-"+e})})),0)})),0)},D=[],P=(r("99af"),r("a9e3"),function(e){Object(y["a"])(r,e);var t=Object(v["a"])(r);function r(){var e;return Object(d["a"])(this,r),e=t.apply(this,arguments),e.style="",e}return Object(b["a"])(r,[{key:"mounted",value:function(){console.log(this.blocks)}},{key:"getStyle",get:function(){var e=32*this.x,t=32*this.y;return"transform: translate(".concat(e,"px, ").concat(t,"px);")}},{key:"getBlocks",get:function(){var e=[];try{e=JSON.parse(this.blocks)}catch(t){console.log(t)}return e}}]),r}(B["c"]));Object(g["a"])([Object(B["b"])({type:String})],P.prototype,"blocks",void 0),Object(g["a"])([Object(B["b"])({type:Number})],P.prototype,"x",void 0),Object(g["a"])([Object(B["b"])({type:Number})],P.prototype,"y",void 0),P=Object(g["a"])([B["a"]],P);var _=P,M=_,N=(r("bec1"),Object(i["a"])(M,T,D,!1,null,"760e45a0",null)),E=N.exports,A=r("c8b5"),R=r.n(A),X=16,Y=10,G=8,I=4,J=4;function K(e,t){return new Promise((function(r){var n=setTimeout((function(){r("timeout")}),e);t&&(t.clear=function(){clearTimeout(n),r("stop")})}))}var L,U=[[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],[[[1,1,0,0],[1,1,0,0],[0,0,0,0],[0,0,0,0]]],[[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,1,0],[1,1,0,0],[0,0,0,0],[0,0,0,0]]],[[[0,1,0,0],[1,1,0,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]],[[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]]],[[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]]]];function F(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}(function(e){e[e["SPACE"]=32]="SPACE",e[e["LEFT"]=37]="LEFT",e[e["UP"]=38]="UP",e[e["RIGHT"]=39]="RIGHT",e[e["DOWN"]=40]="DOWN"})(L||(L={}));var $=function(e){Object(y["a"])(r,e);var t=Object(v["a"])(r);function r(){var e;return Object(d["a"])(this,r),e=t.apply(this,arguments),e.bgBlock=new Array,e.bgBlockString="[]",e.myBlockString="[]",e.timer={},e.score=0,e.curBlockX=0,e.curBlockY=-I,e.curSpeed=500,e}return Object(b["a"])(r,[{key:"startGame",value:function(){var e=this;this.clearBg(),this.score=0,Object(p["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=!0;case 1:if(!r){t.next=18;break}e.curSpeed=1e3,e.newMyBlock(),n=!0;case 5:if(!n){t.next=11;break}return t.next=8,K(e.curSpeed,e.timer);case 8:e.checkCollision(e.curBlockX,e.curBlockY+1,e.curBlockDirection)?(e.curSpeed=1e3,n=!1):e.curBlockY++,t.next=5;break;case 11:if(!e.setMyBlockInBgAndCheckGameOver()){t.next=15;break}r=!1,t.next=16;break;case 15:return t.delegateYield(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=[],e.bgBlock.forEach((function(e){e.some((function(e){return e===G}))&&r.push(e)})),r.length===X){t.next=8;break}for(n=r.length;n<X;n++)c=new Array(Y),c.fill(G,0,Y),r.unshift(c),e.score++;return e.bgBlock=r,t.next=7,K(300);case 7:e.bgBlockString=JSON.stringify(e.bgBlock);case 8:case"end":return t.stop()}}),t)}))(),"t0",16);case 16:t.next=1;break;case 18:alert("gameover"),e.startGame();case 20:case"end":return t.stop()}}),t)})))()}},{key:"newMyBlock",value:function(){this.curBlockX=Math.floor((Y-J)/2),this.curBlockY=-Math.floor(I/2),this.curBlockType=F(0,U.length-1),this.curBlockDirection=0,this.drawMyBlock(this.curBlockType,this.curBlockDirection)}},{key:"getNextDirection",value:function(e){return e<U[this.curBlockType].length-1?e++:e=0,e}},{key:"nextDirection",value:function(){this.curBlockDirection=this.getNextDirection(this.curBlockDirection),this.drawMyBlock(this.curBlockType,this.curBlockDirection)}},{key:"clearBg",value:function(){for(var e=0;e<X;e++)this.bgBlock[e]=new Array(Y),this.bgBlock[e].fill(G,0,Y);this.bgBlockString=JSON.stringify(this.bgBlock)}},{key:"drawMyBlock",value:function(e,t){for(var r=e+1,n=new Array(I),c=0;c<I;c++){n[c]=new Array(J);for(var o=0;o<J;o++)1===U[e][t][c][o]?n[c][o]=r:n[c][o]=0}this.myBlockString=JSON.stringify(n)}},{key:"mounted",value:function(){var e=new R.a(this.$el);e.get("swipe").set({direction:R.a.DIRECTION_VERTICAL}),e.on("swipeup",this.handleSwipeUp),e.on("swipedown",this.handleSwipeDown),e.on("tap",this.handleTap),this.mc=e,this.startGame(),document.addEventListener("keydown",this.handleKeyPress,!1)}},{key:"checkCollision",value:function(e,t,r){for(var n=this.curBlockType,c=new Array(I),o=0;o<I;o++){c[o]=new Array(J);for(var i=0;i<J;i++)if(1===U[n][r][o][i]){if(t+o>=X)return!0;if(e+i<0||e+i>=Y)return!0;if(t+o<0)continue;if(this.bgBlock[t+o][e+i]!==G)return!0}}return!1}},{key:"handleSwipeUp",value:function(){this.handleKeyPress({keyCode:L.UP})}},{key:"handleSwipeDown",value:function(){this.handleKeyPress({keyCode:L.SPACE})}},{key:"handleTap",value:function(e){e.center.x>160?this.handleKeyPress({keyCode:L.RIGHT}):this.handleKeyPress({keyCode:L.LEFT})}},{key:"handleKeyPress",value:function(e){switch(e.keyCode){case L.DOWN:case 32:this.curSpeed=10,this.timer.clear&&this.timer.clear();break;case L.LEFT:this.checkCollision(this.curBlockX-1,this.curBlockY,this.curBlockDirection)||this.curBlockX--;break;case L.UP:this.checkCollision(this.curBlockX,this.curBlockY,this.getNextDirection(this.curBlockDirection))||this.nextDirection();break;case L.RIGHT:this.checkCollision(this.curBlockX+1,this.curBlockY,this.curBlockDirection)||this.curBlockX++;break}}},{key:"setMyBlockInBgAndCheckGameOver",value:function(){for(var e=this.curBlockX,t=this.curBlockY,r=this.curBlockType,n=r+1,c=this.curBlockDirection,o=0;o<I;o++)for(var i=0;i<J;i++)if(1===U[r][c][o][i]){if(t+o<0)return!0;this.bgBlock[t+o][e+i]=n}this.bgBlockString=JSON.stringify(this.bgBlock)}},{key:"beforeDestroy",value:function(){document.removeEventListener("keydown",this.handleKeyPress,!1),this.mc.off("swipeup",this.handleSwipeUp),this.mc.off("swipedown",this.handleSwipeDown),this.mc.off("tap",this.handleTap)}}]),r}(n["a"]);$=Object(g["a"])([Object(B["a"])({name:"tetris",components:{Board:C,MyBlock:E}})],$);var H=$,W=H,z=(r("0e88"),Object(i["a"])(W,h,k,!1,null,"be3e212a",null)),q=z.exports;n["a"].use(f["a"]);var V=[{path:"/",name:"Tetris",component:q}],Q=new f["a"]({routes:V}),Z=Q,ee=r("2f62");n["a"].use(ee["a"]);var te=new ee["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:Z,store:te,render:function(e){return e(l)}}).$mount("#app")},fdc1:function(e,t,r){"use strict";var n=r("8d50"),c=r.n(n);c.a}});
//# sourceMappingURL=app.5369e72e.js.map